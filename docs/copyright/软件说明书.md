# AI Fashion Studio 软件说明书

## 软件名称

**AI Fashion Studio - 基于人工智能的时尚图像生成与管理平台**

## 软件版本

V1.0

## 一、软件概述

### 1.1 产品简介

AI Fashion Studio 是一款面向服装电商行业的智能化图像生成与管理平台。本软件采用先进的人工智能技术，通过双模AI协作架构，将服装平铺图自动转换为多角度、多场景的高质量时尚模特展示图。

软件集成了需求智能分析、自动拍摄计划生成、AI图像生成、智能修复闭环等核心功能，大幅提升服装电商的图片生产效率，降低制作成本，保证输出质量的一致性和可控性。

### 1.2 产品定位

- **目标用户**: 服装电商企业、时尚品牌工作室、电商平台运营团队
- **应用场景**: 服装商品展示图批量生产、新品推广图制作、社交媒体营销素材生成
- **核心价值**: 自动化、标准化、可追溯的图像生产工作流

### 1.3 主要特色

1. **双模AI协作**: 采用Brain（策划者）和Painter（执行者）分离架构，专业化处理不同环节
2. **智能修复闭环**: 仅修复衣服细节，保持模特、场景、光线等要素不变
3. **可追溯性**: 完整记录输入图、Prompt、参数、输出图、修复版本，支持版本对比
4. **知识沉淀**: 支持从参考图学习风格和姿势，创建可复用的预设系统
5. **批量处理**: 企业级批量任务管理，支持队列、优先级、并发控制

## 二、运行环境

### 2.1 硬件要求

**开发环境**:
- CPU: 双核及以上
- 内存: 8GB 及以上
- 存储: 20GB 可用空间

**生产环境**:
- CPU: 2核及以上
- 内存: 4GB 及以上
- 存储: 50GB 可用空间（含数据库和图片存储）

### 2.2 软件要求

**开发环境**:
- 操作系统: macOS 10.15+ / Windows 10+ / Linux (Ubuntu 18.04+)
- Node.js: v18.17.0 或更高版本
- pnpm: v8.x 或更高版本
- Docker: 20.10.0 或更高版本（用于PostgreSQL数据库）
- 浏览器: Chrome 90+ / Firefox 88+ / Safari 14+ / Edge 90+

**生产环境**:
- 操作系统: Linux (Ubuntu 18.04+ / CentOS 7+)
- Node.js: v18.17.0 或更高版本
- Docker: 20.10.0 或更高版本
- Nginx: 1.18+ （推荐）
- PM2: 5.0+ （推荐）

### 2.3 外部依赖

**AI服务**:
- Gemini 2.0 Flash（需求分析）
- Gemini 3 Pro（图像生成）
- 翻译服务API（中英翻译）

**云服务**（生产环境）:
- 腾讯云 SCF（Serverless云函数，用于图像生成）
- 腾讯云 COS（对象存储，用于图片存储）
- PostgreSQL数据库（本地或云端）

## 三、技术特点

### 3.1 技术架构

本软件采用前后端分离的现代化全栈架构：

**前端技术栈**:
- Next.js 15 (React 19) - 现代化前端框架
- TypeScript - 类型安全开发
- Tailwind CSS 4 - 原子化CSS框架
- Radix UI - 无障碍UI组件库
- Zustand - 轻量级状态管理
- Framer Motion - 声明式动画库
- SWR + Axios - 数据请求和缓存
- Dnd Kit - 拖拽交互库

**后端技术栈**:
- NestJS 11 - 企业级Node.js框架
- TypeScript - 类型安全开发
- Prisma 7 - 现代化数据库ORM
- PostgreSQL - 关系型数据库
- Zod - 运行时类型验证
- OpenAI SDK - AI API集成
- 腾讯云COS SDK - 对象存储集成

### 3.2 核心技术特点

#### 3.2.1 全TypeScript技术栈

前后端统一使用TypeScript语言，实现类型定义共享，降低开发复杂度，减少类型转换错误，提升代码可维护性。

#### 3.2.2 模块化设计

采用清晰的模块化架构，后端分为auth、brain、painter、task、credit、admin等独立模块，每个模块包含Controller、Service、DTO等标准分层，便于维护和扩展。

#### 3.2.3 RESTful API设计

采用标准的RESTful API设计原则，统一的请求/响应格式，完整的错误处理机制，便于前后端协作和第三方集成。

#### 3.2.4 数据安全与验证

- 前后端双重数据验证（Zod + Prisma）
- JWT认证机制
- SQL注入防护
- XSS防护
- CSRF防护

#### 3.2.5 高并发处理

- 异步非阻塞I/O架构
- 任务队列管理
- 并发控制（Bottleneck限流）
- 结果缓存（减少重复API调用）

### 3.3 AI集成架构

#### 3.3.1 双模AI协作

**Brain（策划者）**:
- 使用Gemini 2.0 Flash
- 负责需求分析和拍摄计划生成
- 智能提取服装特征
- 生成结构化Shot List和GARMENT LOCK

**Painter（执行者）**:
- 使用Gemini 3 Pro
- 负责图像生成
- 基于Brain提供的精确Prompt生成图片
- 支持批量串行调用

#### 3.3.2 智能提示词工程

- 多层次Prompt模板系统
- Brain提示词（43KB结构化提示词）
- 工作流提示词（不同阶段专用提示词）
- 提示词优化服务

#### 3.3.3 GARMENT LOCK机制

- 自动提取服装关键特征
- 锁定GARMENT LOCK确保多图一致性
- 支持人工编辑和覆盖
- 每个Shot支持个性化覆盖

### 3.4 数据管理

#### 3.4.1 数据库设计

- 使用PostgreSQL关系型数据库
- Prisma ORM提供类型安全的数据库访问
- 完整的数据模型和关系定义
- 数据库迁移管理

#### 3.4.2 对象存储

- 腾讯云COS对象存储
- 图片压缩处理
- 水印自动添加
- CDN加速

### 3.5 部署架构

#### 3.5.1 Serverless架构

- 图像生成采用SCF云函数
- 自动扩缩容
- 按需计费
- 降低服务器压力

#### 3.5.2 Docker容器化

- 前后端Docker镜像
- PostgreSQL Docker容器
- 一键部署脚本
- 便于环境迁移

#### 3.5.3 生产环境推荐

```
Nginx (反向代理 + SSL)
    ↓
PM2 进程管理器 (Cluster Mode)
    ↓
Docker 容器 (NestJS + PostgreSQL)
```

## 四、功能模块

### 4.1 用户端功能

#### 4.1.1 用户系统
- 用户注册（邮箱验证）
- 用户登录（JWT认证）
- 个人资料管理
- 密码修改
- 权限管理

#### 4.1.2 任务管理
- 任务创建（上传服装图 + 人脸参考）
- 需求表单填写（平台/用途、风格、场景、张数、约束）
- 任务状态跟踪
- 任务历史查看
- 任务收藏
- 任务删除

#### 4.1.3 AI需求分析
- 参考图智能分析（视角、焦点、描述）
- 需求解析
- GARMENT LOCK自动生成
- Shot List智能生成
- 英文Prompt自动生成
- 计划编辑和确认

#### 4.1.4 图像生成
- 逐张出图（按Shot单独生成）
- 批量生成（Grid模式/Individual模式）
- 生成参数配置（分辨率、比例、模型选择）
- 生成进度实时显示
- 生成失败重试机制

#### 4.1.5 图像编辑
- 在线图片编辑器
- 图片裁剪
- 水印添加
- 图片压缩
- 图片灯箱（大图预览、对比查看）

#### 4.1.6 智能修复
- 差异对比分析
- 修复方案自动生成
- 修复指令草稿编辑
- 人工确认机制
- 精准改图执行

#### 4.1.7 预设系统
- 风格预设管理（创建、编辑、删除、应用）
- 人脸预设管理
- 姿势预设管理
- 预设集合管理
- 快速预设选择器

#### 4.1.8 学习工作室
- 样式学习（从参考图提取风格参数）
- 姿势学习（分析人物姿态）
- 预设创建和保存
- 知识沉淀系统

#### 4.1.9 批量工作室
- 批量任务创建
- 任务队列管理
- 批量渲染
- 任务优先级设置
- 批量导出

#### 4.1.10 个人中心
- 个人资料查看和编辑
- 积分余额查看
- 积分消费记录
- 邀请码管理
- API配置管理

#### 4.1.11 导出功能
- 单张图片下载
- 批量打包下载
- 导出格式选择
- 文件命名自定义

### 4.2 管理端功能

#### 4.2.1 用户管理
- 用户列表查看
- 用户创建、编辑、删除
- 用户状态管理
- 用户权限分配

#### 4.2.2 任务管理
- 所有任务查看
- 任务筛选和搜索
- 任务详情查看
- 任务状态管理

#### 4.2.3 数据分析
- 统计数据看板
- 用户增长趋势
- 任务完成统计
- 图表可视化

#### 4.2.4 Brain提示词管理
- Brain提示词模板编辑
- 提示词版本管理
- 提示词测试

#### 4.2.5 学习提示词管理
- 学习提示词配置
- 提示词编辑和测试

#### 4.2.6 工作流提示词管理
- 工作流提示词配置
- 不同阶段提示词管理

#### 4.2.7 直出提示词管理
- 直出模式提示词配置
- 提示词模板编辑

#### 4.2.8 模型配置管理
- AI模型配置
- 网关设置
- 模型参数调整

#### 4.2.9 积分系统
- 积分充值
- 积分消费记录
- 积分规则配置

#### 4.2.10 邀请码管理
- 邀请码生成
- 邀请码状态管理
- 邀请记录查询

#### 4.2.11 日志管理
- 操作日志查看
- 日志筛选和搜索
- 日志导出

#### 4.2.12 MCP协议管理
- Model Context Protocol配置
- 模型上下文管理

### 4.3 后端核心服务

#### 4.3.1 认证服务
- JWT生成和验证
- 用户登录/注册
- 密码加密存储
- 权限守卫

#### 4.3.2 Brain服务
- AI需求分析
- 计划生成
- GARMENT LOCK提取
- 参考图分析

#### 4.3.3 Painter服务
- 图像生成调用
- 批量生成协调
- 生成结果处理

#### 4.3.4 任务服务
- 任务CRUD操作
- 任务状态流转
- 任务历史记录
- 任务搜索和筛选

#### 4.3.5 直出任务服务
- Direct模式任务处理
- 快速生成流程
- 结果优化

#### 4.3.6 分镜服务
- Hero Storyboard生成
- 分镜计划编排
- 多图协调

#### 4.3.7 渲染编排服务
- 任务渲染队列管理
- 并发控制
- 错误重试
- 进度跟踪

#### 4.3.8 计费服务
- 积分预扣
- 实时结算
- 账务记录
- 审计日志

#### 4.3.9 修复服务
- 图片修复方案生成
- 修复指令生成
- 修复执行

#### 4.3.10 导出服务
- 批量导出
- 文件打包
- 格式转换

#### 4.3.11 COS服务
- 对象存储集成
- 文件上传/下载
- 图片压缩
- 水印处理

#### 4.3.12 翻译服务
- 中英翻译
- Prompt翻译
- 文本优化

#### 4.3.13 提示词优化服务
- Prompt智能优化
- 关键词提取
- 结构化处理

## 五、性能指标

### 5.1 性能要求

- 前端首屏加载时间: < 2秒
- 页面路由切换: < 1秒
- API平均响应时间: < 500ms（不含AI生成时间）
- 并发用户数: 支持100-500并发
- 数据库查询: < 100ms

### 5.2 可用性

- 系统可用性: 99.9%
- 数据备份: 每日自动备份
- 错误恢复: 自动重启机制
- 日志保留: 30天

### 5.3 安全性

- HTTPS加密传输（生产环境）
- JWT认证和授权
- SQL注入防护
- XSS防护
- CSRF防护
- 敏感数据加密存储

## 六、系统限制

### 6.1 功能限制

- 单次任务最大上传图片数: 20张
- 单张图片最大尺寸: 10MB
- 单次任务最大生成张数: 20张
- 单用户每日任务数: 100个（可根据积分调整）

### 6.2 技术限制

- 图像生成速度: 取决于AI API响应时间（通常10-30秒/张）
- 修复成功率: 70-90%（取决于具体修改内容）
- 并发处理: 受AI API速率限制影响

## 七、版权声明

本软件及其所有组成部分（包括但不限于源代码、文档、设计文件等）的版权归开发团队所有。未经授权，任何个人或组织不得复制、修改、分发、转让或用于商业用途。

## 八、联系方式

- 技术支持: support@aifashionstudio.com
- 商务合作: business@aifashionstudio.com

---

**文档版本**: V1.0
**最后更新**: 2026-01-27
